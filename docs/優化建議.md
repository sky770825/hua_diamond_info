# 專案優化與調整建議

以下為可依優先順序或需求採用的改進項目，供後續迭代參考。

---

## 一、前端（React / Vite）

### 1. 圖片載入與錯誤處理
- **`src/api/images.ts`**：`portfolioImageUrl("")` 會回傳 `apiUrl("/")`，空字串時建議回傳空或占位圖路徑，避免請求無效 URL。
- **MemberCard / MemberDetailDialog**：可為 `<img>` 加上 `onError` 顯示占位圖或 initials，避免破圖時留白。

### 2. 資料快取（React Query）
- 目前 Index 使用 `useMembers` 自己 fetch，未用 React Query 的 `useQuery`。
- 若已用 `QueryClientProvider`，可改為 `useQuery` 並設定 `staleTime`（例如 60 秒），減少重複請求、改善體感速度。

### 3. SEO 與分享圖
- **`index.html`**：`og:image` 已改為 BNI logo（`/og-image.png`），分享到社群時會顯示代表圖。

### 4. 錯誤邊界（Error Boundary）
- 在 `App.tsx` 外層加一層 React Error Boundary，可避免單一元件爆錯時整頁白屏，並顯示「發生錯誤，請重新整理」等提示。

### 5. 無障礙與鍵盤
- 成員牆卡片已有 `role="button"`、`tabIndex={0}`、Enter/Space，可再確認焦點樣式（focus-visible）是否明顯。
- 作品集 lightbox 關閉時焦點可回到觸發放大的按鈕（focus management）。

---

## 二、管理後台（admin-full.html）

### 1. 環境變數與金鑰
- Supabase URL / Anon Key 目前有寫在頁內 fallback，正式環境建議改為僅用 `window.__SUPABASE_URL__` / `window.__SUPABASE_ANON_KEY__`（由部署時注入），避免金鑰長期暴露在原始碼。

### 2. 上傳前檢查
- 可限制檔案類型（僅允許 image/*）與大小（例如 5MB），超過時在前端先提示，再呼叫 Supabase，減少無效上傳。

### 3. 作品集圖片點擊放大
- 管理後台作品集縮圖目前無點擊放大，若需要可加一層簡單 lightbox（與前端成員詳情類似），方便預覽再決定是否刪除。

### 4. 載入逾時時間
- 目前 `load()` 逾時為 15 秒，若網路較慢可考慮改為 20–25 秒，或改為可配置。

---

## 三、部署與設定

### 1. Vercel 靜態檔
- 使用 `"rewrites": [{ "source": "/(.*)", "destination": "/index.html" }]` 時，Vercel 會先對應靜態檔再套用 rewrite，故 `dist/admin-full.html` 理論上會正確以 `/admin-full.html` 提供。
- 若線上發現 `/admin-full.html` 被導到 SPA，可改為在 `vercel.json` 先寫一條：  
  `{ "source": "/admin-full.html", "destination": "/admin-full.html" }`，再保留其餘 SPA rewrite。

### 2. 後端（backend）
- 目前成員牆與管理後台皆走 Supabase，後端為備援／本機用。若未來只部署前端到 Vercel，可保留 backend 專案供本地或其它環境使用，無需改動即可。

---

## 四、可選優化（較小改動）

| 項目 | 說明 |
|------|------|
| 成員卡圖片 lazy load | 卡片已在 viewport 外時可加 `loading="lazy"`（部分瀏覽器已預設）。 |
| 篩選／排序網址同步 | 將篩選、排序寫入 URL query（已有 `useSearchParams` 可延伸），方便分享「當前篩選」連結。 |
| PWA / 離線提示 | 需要離線體驗時可加 service worker；或僅在 fetch 失敗時提示「請檢查網路」。 |
| 管理後台 RWD | 在小螢幕上表單與按鈕已可捲動，可再檢查「新增成員」表單欄位是否需改為單欄排列。 |

---

## 五、建議實作順序（若時間有限）

1. **圖片空字串與破圖**：`portfolioImageUrl` 空值處理 + img `onError` 占位。
2. **管理後台**：正式環境僅用 `window.__SUPABASE_*`，必要時加上傳類型/大小檢查。
3. **SEO**：替換 `og:image` 為實際代表圖。
4. 其餘依需求再排入（React Query、Error Boundary、lightbox 焦點等）。

以上皆為建議，可依實際優先級挑選實作。
