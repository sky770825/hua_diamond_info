# 自動化與一鍵設定

## CI（GitHub Actions）

- **觸發**：每次 `push` 或 `pull_request` 到 `main`
- **步驟**：`npm ci` → `npm run lint` → `npm run test` → `npm run build`
- **結果**：任一失敗則 workflow 失敗；通過後由 Vercel / Cloudflare 的 Git 整合自動部署

## 本機一鍵驗證

```bash
npm run ci
```

等同：`lint` → `test` → `build`，與 CI 一致。

## 部署

| 平台 | 指令 | 說明 |
|------|------|------|
| Vercel | `npm run deploy:vercel` | 建置後 `vercel --prod`（需先 `vercel link`） |
| Cloudflare Pages | `npm run deploy` 或 `npm run deploy:pages` | 建置後 wrangler 上傳（需先 `npx wrangler login`） |

連接 GitHub 後，**push 到 main 會自動部署**，不需手動跑上述指令。

## 環境變數檢查

```bash
node scripts/check-env.mjs        # 前端必要變數
node scripts/check-env.mjs --deploy   # 含 Vercel API（/api/events）用變數
```

## Supabase：events 表（供 /api/events）

1. 開啟 [Supabase Dashboard](https://supabase.com/dashboard) → 專案 → **SQL Editor**
2. 貼上並執行：`database/events_table.sql`
3. 在 Vercel 專案設定：`SUPABASE_URL`、`SUPABASE_SERVICE_ROLE_KEY`

完成後 `GET /api/events` 即可使用。
